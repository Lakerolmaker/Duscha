<html>

<head>






</head>
<img id="soap" src="Bilder/soap1.png" style="display: none">
<img id="Backteria" src="Bilder/Backteria%20smutsig.png" style="display: none">
<img id="soapbuble" src="Bilder/soapbuble.png" style="display: none">




<body>

    <canvas id="myCanvas" width="800" height="600" style="position: absolute; left 0px; right 0px; border:3px solid blue" z-index; 1>>




        <script>
            var soapImg;
            var BackteriaImg;



            var c = document.getElementById("myCanvas");
            var ctx = c.getContext("2d");

            soapImg = document.getElementById("soap");
            backteriaImg = document.getElementById("Backteria")
            soapbubleImg = document.getElementById("soapbuble")
            



            //:  uppdaterar functionen som uppdaterar  spelet
            window.setInterval(update, 1)

            // functionen som skapar en bakteria.
            function Backteria(name, x, y, vy, vx) {

                this.name = name;
                this.x = x;
                this.vx = vx;
                this.y = y;
                this.vy = vy;


            }

            var atackers = []



             //:  uppdaterar spelet
            function update() {
              

                
 
                heartbeat();
                ctx.clearRect(0,0,800,600)
                
                
               
                DrawImg()
                
                if (miliseconds == 0) {
                Spawn()
                 }
                
                
            }
            

            var names = 0

            //: Skapar nya bakterier.
            function Spawn() {
                if((names !== 20) ) {
               
                    names = names + 1
                    atackers.push(new Backteria(names, 0, 10, 0, 0.3 ))
                    
                  
                   

              }
            }
            
            
            //: Ritar ut alla Backterier
            function DrawImg() {

                
                
                  //: Ritar ut alla Bakterier.
                for(var i = 0; i < atackers.length ; i++){
                    
                    if(atackers.length !== 20){
                        
                    if((this.atackers[i].x > 700) && (this.atackers[i].y < 99)){
                        this.atackers[i].vx = 0
                        this.atackers[i].vy = 0.4
                    }
                    
                    if((this.atackers[i].y > 70 ) &&  (this.atackers[i].x > 50)) {
                       this.atackers[i].vy = 0
                       this.atackers[i].vx = -0.3
                    }
                    
                    /*if((this.atackers[i].x < 10) && (this.atackers[i].y > 67) && (this.atackers[i].y < 75)){
                        
                        this.atackers[i].vx = 0
                        this.atackers[i].vy = 0.4
                           }
                    */
                
                 }
                    
                if(atackers.length == 20){
                     
                    if(i <= 9){
                       
                        // stoppar den undre raden när den första bakterien är vid dens specifika lokalition.
                        if(this.atackers[0].x > 51.8){
                             this.atackers[i].vx = -0.3
                             // stoppar alla bakterier från att åka i y-led
                             //(förutom nummer 10, efterssom att den inte hade åkt klart)
                             if(i != 9){
                              this.atackers[i].vy = 0
                             } 
          
                       }else{
                           this.atackers[i].vx = 0
                       }
                        
                        
                        // Gör så att nummer 10 åkert klart i y-led
                             if(i == 9){
                                 if(this.atackers[i].y > 70){
                                   this.atackers[i].vy = 0  
                                 }
                             }
                        
                    }
                     
                    
                    if(i > 9){
                       if(this.atackers[10].x < 700){
                             this.atackers[i].vx = 0.3
                             this.atackers[i].vy = 0
                         
                       }else{
                          this.atackers[i].vx = 0
                          this.atackers[i].vy = 0
                          this.atackers[9].x = this.atackers[10].x
                          
                       }
                    }
                     
                    
                   
                      
                 }
                      
                       
                    //: Uppdaterar positionen av bakterien
                    this.atackers[i].x = this.atackers[i].x + this.atackers[i].vx
                    this.atackers[i].y = this.atackers[i].y + this.atackers[i].vy
                    //: Målar ut bakterien
                    ctx.drawImage(backteriaImg,this.atackers[i].x, this.atackers[i].y, 50, 50)
                    

                  }

                
                
                ctx.drawImage(soapImg,350,500,100,100)
                ctx.drawImage(soapbubleImg,400,500,18,17)
                
                
            }

           

            

            
           
            
            //: Tids variabler
            var miliseconds = 0,
                seconds = 0,
                minutes = 0,
                hours = 0,
                modclock = 240;





  
            // : Gör så att tiden ändras, altt efter som.
            function heartbeat() {
                //: Visar tiden i consolen.
                //rconsole.log(hours + ":" + minutes + ":" + seconds + ":" + miliseconds)

                
                miliseconds = miliseconds + 1

                if (miliseconds > modclock) {
                    miliseconds = 0
                    seconds = seconds + 1
                } else if (seconds > 60) {
                    seconds = 0
                    minutes = minutes + 1
                } else if (minutes > 60) {
                    minutes = 0
                    hours = hours + 1

                }




            }
        </script>
</body>

</html>