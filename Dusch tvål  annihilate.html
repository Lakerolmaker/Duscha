<html>

<head>






</head>
<img id="soap" src="Bilder/soap.png" style="display: none">
<img id="Backteria" src="Bilder/Backteria%202.png" style="display: none">




<body>

    <canvas id="myCanvas" width="800" height="600" style="position: absolute; left 0px; right 0px; border:3px solid blue" z-index; 1>>




        <script>
            var soapImg;
            var BackteriaImg;



            var c = document.getElementById("myCanvas");
            var ctx = c.getContext("2d");

            soapImg = document.getElementById("soap");
            BackteriaImg = document.getElementById("Backteria")



            //:  uppdaterar functionen som uppdaterar  spelet
            window.setInterval(update, 1)

            // functionen som skapar en bakteria.
            function Backteria(name, x, y, vy, vx) {

                this.name = name;
                this.x = x;
                this.vx = vx;
                this.y = y;
                this.vy = vy;


            }

            var atackers = []



             //:  uppdaterar spelet
            function update() {
              

                miliseconds = miliseconds + 0.5
                
                if(miliseconds == 120){
                    
                    miliseconds = 0
                }
                ctx.clearRect(0,0,800,600)
                DrawImg()
                
                 if (miliseconds == 0) {
                Spawn()
                 }

            }
            

            var names = 0

            function Spawn() {
                if(names !== 20){
               
                    names = names + 1
                    atackers.push(new Backteria(names, 0, 10, 0, 0.3 ))
                    
                   //console.log(atackers.toString())
                    console.log(names)

                     
                

            }
            }
            //: Ritar ut alla Backterier
            function DrawImg() {

                
                
                  
                for(var i = 0; i < atackers.length ; i++){
                    
                    if(atackers.length !== 20){
                        
                    if((this.atackers[i].x > 700) && (this.atackers[i].y < 99)){
                        this.atackers[i].vx = 0
                        this.atackers[i].vy = 0.4
                    }
                    
                    if((this.atackers[i].y > 70 ) &&  (this.atackers[i].x > 50)) {
                       this.atackers[i].vy = 0
                       this.atackers[i].vx = -0.3
                    }
                    
                    /*if((this.atackers[i].x < 10) && (this.atackers[i].y > 67) && (this.atackers[i].y < 75)){
                        
                        this.atackers[i].vx = 0
                        this.atackers[i].vy = 0.4
                           }
                    */
                
                 }
                    
                if(atackers.length == 20){
                     
                    if(i <= 9){
                       
                        // stoppar den undre raden när den första bakterien är vid dens specifika lokalition.
                        if(this.atackers[0].x > 51.8){
                             this.atackers[i].vx = -0.3
                             // stoppar alla bakterier från att åka i y-led
                             //(förutom nummer 10, efterssom att den inte hade åkt klart)
                             if(i != 9){
                              this.atackers[i].vy = 0
                             } 
          
                       }else{
                           this.atackers[i].vx = 0
                       }
                        
                        
                        // Gör så att nummer 10 åkert klart i y-led
                             if(i == 9){
                                 if(this.atackers[i].y > 70){
                                   this.atackers[i].vy = 0  
                                 }
                             }
                        
                    }
                     
                    
                    if(i > 9){
                       if(this.atackers[10].x < 700){
                             this.atackers[i].vx = 0.3
                             this.atackers[i].vy = 0
                         
                       }else{
                          this.atackers[i].vx = 0
                          this.atackers[i].vy = 0
                          this.atackers[10].x = 674.4
                       }
                    }
                     
                    
                     
                 }
                      
                    
                    
                    this.atackers[i].x = this.atackers[i].x + this.atackers[i].vx
                    this.atackers[i].y = this.atackers[i].y + this.atackers[i].vy
                    ctx.drawImage(BackteriaImg,this.atackers[i].x, this.atackers[i].y, 50, 50)
                    

            }

            }

            //: Startar en counter i backgrunden
            //startdelay();

            function startdelay() {

                interval = setInterval(heartbeat, 10);

            }

            function stopdelay() {
                clearInterval(interval)
            }
            var miliseconds = 0,
                seconds = 0,
                minutes = 0,
                hours = 0;






            function heartbeat() {
                //console.log(hours + ":" + minutes + ":" + seconds + ":" + miliseconds)

                miliseconds = miliseconds + 1

                if (miliseconds > 100) {
                    miliseconds = 0
                    seconds = seconds + 1
                } else if (seconds > 60) {
                    seconds = 0
                    minutes = minutes + 1
                } else if (minutes > 60) {
                    minutes = 0
                    hours = hours + 1

                }




            }
        </script>
</body>

</html>